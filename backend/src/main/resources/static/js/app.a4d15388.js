(function(){"use strict";var e={501:function(e,t,r){var n=r(751),a=r(641);function o(e,t,r,n,o,i){const l=(0,a.g2)("StockCharts");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(l)])}var i=r(33);const l={style:{margin:"12px 0",display:"flex",gap:"8px","align-items":"center","flex-wrap":"wrap"}},s=["disabled"],c={key:0},u={key:1,style:{color:"#b00"}},d={style:{position:"relative",width:"100%",height:"360px",color:"#bb0000"}},f={ref:"chartCanvas"};function p(e,t,r,o,p,v){return(0,a.uX)(),(0,a.CE)("div",null,[t[4]||(t[4]=(0,a.Lk)("h2",null,"Stocks Chart",-1)),(0,a.Lk)("div",l,[(0,a.Lk)("label",null,[t[3]||(t[3]=(0,a.eW)(" Symbol: ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.symbol=e),onKeyup:t[1]||(t[1]=(0,n.jR)(e=>o.reload(),["enter"])),placeholder:"AAPL"},null,544),[[n.Jo,o.symbol,void 0,{trim:!0}]])]),(0,a.Lk)("button",{onClick:t[2]||(t[2]=e=>o.reload()),disabled:o.loading},"Laden",8,s),o.loading?((0,a.uX)(),(0,a.CE)("span",c,"lädt…")):(0,a.Q3)("",!0),o.errorMsg?((0,a.uX)(),(0,a.CE)("span",u,(0,i.v_)(o.errorMsg),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",d,[(0,a.Lk)("canvas",f,null,512)]),t[5]||(t[5]=(0,a.Lk)("h3",{style:{"margin-top":"12px"}},"Letzten Preise:",-1)),(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.lastPrices,(e,t)=>((0,a.uX)(),(0,a.CE)("li",{key:t},(0,i.v_)(t+1)+". "+(0,i.v_)(e.toFixed(2))+" USD ",1))),128))])])}var v=r(953),y={name:"StockChart",setup(){const e=(0,v.KR)("AAPL"),t=(0,v.KR)(null),n=(0,v.KR)(""),o=(0,v.KR)(!1),i=(0,v.KR)([]);let l,s;const c=async()=>{const e=await r.e(468).then(r.bind(r,468)),{Chart:t,LineController:n,LineElement:a,PointElement:o,LinearScale:i,CategoryScale:l,Tooltip:s,Legend:c}=e;return t.register(n,a,o,i,l,s,c),t},u=async e=>{s&&s.abort(),s=new AbortController,o.value=!0,n.value="";try{const t=`/api/stocks/${encodeURIComponent(e)}`,r=await fetch(t,{signal:s.signal});if(!r.ok)throw new Error(`${e}: HTTP ${r.status}`);const n=await r.json();let a=[];Array.isArray(n?.historical)?a=n.historical:Array.isArray(n?.data)?a=n.data:Array.isArray(n?.results)?a=n.results:Array.isArray(n?.historicalStockList)&&n.historicalStockList.length>0&&Array.isArray(n.historicalStockList[0]?.historical)?a=n.historicalStockList[0].historical:Array.isArray(n)&&(a=n);const o=a.map(e=>{const t=e.date||e.formattedDate||e.datetime||e.label||e.timestamp||null,r=e.close??e.adjClose??e.price??e.value??null,n="string"===typeof r?parseFloat(r.replace(",",".")):r;return{date:t,close:n}}).filter(e=>e.date&&"number"===typeof e.close&&!Number.isNaN(e.close));if(!o.length)throw new Error(`Keine Kursdaten erhalten (Symbol: ${e}).`);o.sort((e,t)=>e.date<t.date?-1:e.date>t.date?1:0);const l=o.slice(-180),c=l.map(e=>e.date),u=l.map(e=>e.close);return i.value=u.slice(-5).reverse(),{labels:c,values:u}}catch(t){return"AbortError"!==t.name&&(n.value=t.message||String(t)),{labels:[],values:[]}}finally{o.value=!1}},d=e=>{const t=new Date(e+"T00:00:00Z");return new Intl.DateTimeFormat(void 0,{year:"2-digit",month:"2-digit",day:"2-digit"}).format(t)},f=async()=>{s&&s.abort(),s=new AbortController,o.value=!0,n.value="";try{const{labels:t,values:r}=await u(e.value.toUpperCase());i.value=r.slice(-5).reverse(),await p(t,r)}catch(t){n.value=t.message||String(t),await p([],[])}finally{o.value=!1}},p=async(r,n)=>{const a=await c(),o=t.value.getContext("2d");l&&l.destroy(),l=new a(o,{type:"line",data:{labels:r,datasets:[{label:e.value,data:n,tension:.2}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"nearest",intersect:!1},plugins:{legend:{display:!0},tooltip:{enabled:!0,callbacks:{title:e=>e.length?d(e[0].label):"",label:e=>`${e.dataset.label}: ${e.formattedValue} USD`}}},scales:{x:{display:!0,ticks:{callback:(e,t)=>d(r[t]),maxRotation:0,autoSkip:!0}},y:{display:!0}}}})};return(0,a.sV)(async()=>{await f()}),(0,a.hi)(()=>{s&&s.abort(),l&&l.destroy()}),{symbol:e,chartCanvas:t,errorMsg:n,loading:o,lastPrices:i,reload:f}}},h=r(262);const b=(0,h.A)(y,[["render",p],["__scopeId","data-v-f70e1c8a"]]);var m=b,g={components:{StockCharts:m}};const k=(0,h.A)(g,[["render",o]]);var w=k;(0,n.Ef)(w).mount("#app")}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.m=e,function(){var e=[];r.O=function(t,n,a,o){if(!n){var i=1/0;for(u=0;u<e.length;u++){n=e[u][0],a=e[u][1],o=e[u][2];for(var l=!0,s=0;s<n.length;s++)(!1&o||i>=o)&&Object.keys(r.O).every(function(e){return r.O[e](n[s])})?n.splice(s--,1):(l=!1,o<i&&(i=o));if(l){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,a,o]}}(),function(){r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce(function(t,n){return r.f[n](e,t),t},[]))}}(),function(){r.u=function(e){return"js/"+e+".8aa5da68.js"}}(),function(){r.miniCssF=function(e){}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="frontend:";r.l=function(n,a,o,i){if(e[n])e[n].push(a);else{var l,s;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+o){l=d;break}}l||(s=!0,l=document.createElement("script"),l.charset="utf-8",r.nc&&l.setAttribute("nonce",r.nc),l.setAttribute("data-webpack",t+o),l.src=n),e[n]=[a];var f=function(t,r){l.onerror=l.onload=null,clearTimeout(p);var a=e[n];if(delete e[n],l.parentNode&&l.parentNode.removeChild(l),a&&a.forEach(function(e){return e(r)}),t)return t(r)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=f.bind(null,l.onerror),l.onload=f.bind(null,l.onload),s&&document.head.appendChild(l)}}}(),function(){r.p="/"}(),function(){var e={524:0};r.f.j=function(t,n){var a=r.o(e,t)?e[t]:void 0;if(0!==a)if(a)n.push(a[2]);else{var o=new Promise(function(r,n){a=e[t]=[r,n]});n.push(a[2]=o);var i=r.p+r.u(t),l=new Error,s=function(n){if(r.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var o=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",l.name="ChunkLoadError",l.type=o,l.request=i,a[1](l)}};r.l(i,s,"chunk-"+t,t)}},r.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,o,i=n[0],l=n[1],s=n[2],c=0;if(i.some(function(t){return 0!==e[t]})){for(a in l)r.o(l,a)&&(r.m[a]=l[a]);if(s)var u=s(r)}for(t&&t(n);c<i.length;c++)o=i[c],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(u)},n=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=r.O(void 0,[504],function(){return r(501)});n=r.O(n)})();
//# sourceMappingURL=app.a4d15388.js.map